<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bytestellar launcher</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            height: 100vh;
            margin: 0;
            background-color:black;
            display: flex;
        }
        button {
            margin: 10px;
            font-size: 16px;
            padding: 10px 20px;
            cursor: pointer;
            height: 40px;
            background-color: #0f0f0f;
            color: white;
        }
        .status {
          background-color: #0f0f0f;
          height: 30px;
          display: flex;
          justify-content: center;
          align-items: center;
          width: auto;
          padding: 7px;
          margin: 10px;
          border-radius: 10px;
          outline-style: solid;
          outline-color: #424242;
          outline-width: 1px;
        }
        p {
          color: white;
        }
        .orange {
          color: orange;
        }
        .green {
          color: #27f238;
        }
    </style>
</head>
<body>

    <button onclick="openIframe()">Open Bytestellar</button>
    <div class="status">
      <p>Status: </p>
      <p class="orange" id="stat-con"> idle</p>
    </div>

    <script>
        function openIframe() {
          var element = document.getElementById('stat-con');
          element.classList.remove('orange');
          element.classList.add('green');
          element.innerText = "running"
            function delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }

      async function log() {
        var statelement = document.getElementById('stat-con');
        
        let logWindow = window.open('', '', 'width=1000,height=400');
        logWindow.document.write('<html><head><title>Byte runtime</title><style>body {background-color: black; color: white; font-family: Arial, sans-serif;} pre {line-height: 1;}</style></head><body><pre id="logContent"></pre></body></html>');
        let logContent = logWindow.document.getElementById('logContent');
        
        async function appendLog(text) {
          logContent.innerText += text + '\n';
          logContent.scrollTop = logContent.scrollHeight;  
          await delay(100);
        }

        await appendLog("[02:30:23+353][main/INFO][ByteRuntime]:  - EXT_color_buffer_float");
        await appendLog("[02:30:23+354][main/INFO][ByteRuntime]: ES6 Shim Status: Disabled");
        await appendLog("[02:30:23+362][main/INFO][ByteRuntime]: _ Compiling webASM. vers 1.5532.42.111. to comp_asm_main.asm");
        await appendLog("[02:30:23+390][main/INFO][ByteRuntime]: XML precompliation configuration is disabled, falling back to systemctl");
        await appendLog("[02:30:23+397][main/INFO][ByteRuntime]: Byte comp finished, starting process...");
        await delay(2000);
        await appendLog("[02:30:24+126][main/INFO][ByteRuntime]: Exeption on comp_asm_main.asm:4623:5, falling back to launcher");
        await appendLog("Launcher class called upon. PID 5433. Restarting main...");
        await delay(100);
        await appendLog("Failed to find exeption source. attempting to restart...");
        await delay(3000);
        await appendLog("[02:30:23+353][main/INFO][ByteRuntime]:  - EXT_color_buffer_float");
        await appendLog("[02:30:23+354][main/INFO][ByteRuntime]: ES6 Shim Status: Disabled");
        await appendLog("[02:30:23+362][main/INFO][ByteRuntime]: _ Compiling webASM. vers 1.5532.42.111. to comp_asm_main.asm");
        await appendLog("[02:30:23+390][main/INFO][ByteRuntime]: XML precompliation configuration is disabled, falling back to systemctl");
        await appendLog("[02:30:23+397][main/INFO][ByteRuntime]: Byte comp finished, starting process...");
        await delay(1000);
        await appendLog("[02:30:23+397][main/INFO][ByteRuntime]: Finished pre_Comp sucessfully");
        if (Math.floor(Math.random() * 11) === 10) {
          await appendLog("[02:30:23+353][main/INFO][ByteRuntime]:  - EXT_color_buffer_float");
          await delay(500);
        }
        await appendLog("[01:08:12+004][Client thread/INFO][DeferredGBufferPipelineCompiler]: Compiling program for core state: 1 2 4 8 16 32 64, ext state: 1 2 4");
        await appendLog("[01:08:11+041][Client thread/INFO][DeferredPipelineCompiler]: Compiling asm: Byte:glsl/deferred/clouds_sun_occlusion.fsh");
        await delay(500);
        await appendLog("[01:08:10+900][Client thread/INFO][ByteDeferredPipeline]: Rebuilding pipeline...");
        await delay(100);
        await appendLog("[09:19:34+235][IntegratedServer/INFO][Byte]: channel lost connection: TextComponent{text='End of stream', siblings=[], style=Style{hasParent=false, color=null, bold=null, italic=null, underlined=null, obfuscated=null, clickEvent=null, hoverEvent=null, insertion=null}}");
        await appendLog("[09:03:51+363][IntegratedServer/INFO][ByteIntegratedServer]: Starting ByteX integrated server worker...");
        await delay(800);
        await appendLog("[09:03:51+397][Client thread/INFO][ServerController]: Integrated server signaled a successful boot");
        await delay(500);
        await appendLog("[09:03:54+578][Client thread/WARN][ChannelManager]: Unable to run empty ChannelEvent(2): meta:missing_comp");
        await appendLog("[09:03:51+397][Client thread/INFO][ServerController]: Integrated server runtime initialization was successful");

        await appendLog("██████╗ ████████╗██╗   ██╗███████╗    ██████╗ ██╗   ██╗███╗   ██╗████████╗██╗███╗   ███╗███████╗");
        await delay(50);
        await appendLog("██╔══██╗╚══██╔══╝╚██╗ ██╔╝██╔════╝    ██╔══██╗██║   ██║████╗  ██║╚══██╔══╝██║████╗ ████║██╔════╝");
        await delay(50);
        await appendLog("██████╔╝   ██║    ╚████╔╝ █████╗      ██████╔╝██║   ██║██╔██╗ ██║   ██║   ██║██╔████╔██║█████╗  ");
        await delay(50);
        await appendLog("██╔══██╗   ██║     ╚██╔╝  ██╔══╝      ██╔══██╗██║   ██║██║╚██╗██║   ██║   ██║██║╚██╔╝██║██╔══╝  ");
        await delay(50);
        await appendLog("██████╔╝   ██║      ██║   ███████╗    ██║  ██║╚██████╔╝██║ ╚████║   ██║   ██║██║ ╚═╝ ██║███████╗");
        await delay(50);
        await appendLog("╚═════╝    ╚═╝      ╚═╝   ╚══════╝    ╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═══╝   ╚═╝   ╚═╝╚═╝     ╚═╝╚══════╝");
        await delay(2000);
        logWindow.close();
        statelement.classList.remove('green');
        statelement.classList.add('orange');
        statelement.innerText = "idle"
        
            var newWindow = window.open("about:blank", "_blank");
        
            if (newWindow === null || newWindow.closed || typeof newWindow.closed == 'undefined') {
                alert('Please allow popups to open bytestellar');
            }
            else {
              newWindow.close()
            }
        
        var newWindow = window.open("about:blank", "_blank");

        newWindow.document.write('<html><head><title>New Tab</title><style>body {background-color:black;}</style></head><body>');
        newWindow.document.write((12).toString(36).toLowerCase().split('').map(function(G){return String.fromCharCode(G.charCodeAt()+(-39))}).join('')+(1114858886).toString(36).toLowerCase()+(16).toString(36).toLowerCase().split('').map(function(a){return String.fromCharCode(a.charCodeAt()+(-71))}).join('')+(37272).toString(36).toLowerCase()+(13).toString(36).toLowerCase().split('').map(function(W){return String.fromCharCode(W.charCodeAt()+(-39))}).join('')+(18).toString(36).toLowerCase().split('').map(function(m){return String.fromCharCode(m.charCodeAt()+(-71))}).join('')+(29945008).toString(36).toLowerCase()+(10).toString(36).toLowerCase().split('').map(function(P){return String.fromCharCode(P.charCodeAt()+(-39))}).join('')+(1147).toString(36).toLowerCase().split('').map(function(i){return String.fromCharCode(i.charCodeAt()+(-71))}).join('')+(33077).toString(36).toLowerCase()+(30).toString(36).toLowerCase().split('').map(function(L){return String.fromCharCode(L.charCodeAt()+(-71))}).join('')+(520).toString(36).toLowerCase()+(function(){var z=Array.prototype.slice.call(arguments),N=z.shift();return z.reverse().map(function(X,q){return String.fromCharCode(X-N-13-q)}).join('')})(2,132,131,123,131,132,126)+(24172).toString(36).toLowerCase()+(30).toString(36).toLowerCase().split('').map(function(i){return String.fromCharCode(i.charCodeAt()+(-71))}).join('')+(17383).toString(36).toLowerCase()+(664).toString(36).toLowerCase().split('').map(function(K){return String.fromCharCode(K.charCodeAt()+(-71))}).join('')+(1037).toString(36).toLowerCase()+(function(){var W=Array.prototype.slice.call(arguments),i=W.shift();return W.reverse().map(function(P,a){return String.fromCharCode(P-i-8-a)}).join('')})(37,170,165,167,94,120,97,107,106,106,88,113,158,169,152,156,169,83,109,148,154,166)+(21377).toString(36).toLowerCase()+(10).toString(36).toLowerCase().split('').map(function(r){return String.fromCharCode(r.charCodeAt()+(-39))}).join('')+(16).toString(36).toLowerCase().split('').map(function(q){return String.fromCharCode(q.charCodeAt()+(-71))}).join('')+(1296).toString(36).toLowerCase()+(21).toString(36).toLowerCase().split('').map(function(T){return String.fromCharCode(T.charCodeAt()+(-71))}).join('')+(11).toString(36).toLowerCase().split('').map(function(B){return String.fromCharCode(B.charCodeAt()+(-39))}).join('')+(664).toString(36).toLowerCase().split('').map(function(L){return String.fromCharCode(L.charCodeAt()+(-71))}).join('')+(26467718).toString(36).toLowerCase()+(function(){var b=Array.prototype.slice.call(arguments),l=b.shift();return b.reverse().map(function(S,D){return String.fromCharCode(S-l-62-D)}).join('')})(58,252,268,255,257,198,210,211,182,206,188,177,244,240,254,242,249,236,241,171,197,254,245,241,240,228,162,163,176,161,187,239,225,223,236,232,218)+(806).toString(36).toLowerCase()+(function(){var C=Array.prototype.slice.call(arguments),Y=C.shift();return C.reverse().map(function(A,n){return String.fromCharCode(A-Y-2-n)}).join('')})(58,122));
        newWindow.document.write('</body></html>');
      }

      log();
        }
    </script>

</body>
</html>
